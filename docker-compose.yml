version: "3.4"
services:
  aws-labs:
    image: aws-labs
    build:
      context: .
    environment:
      - AWS_DEFAULT_REGION=us-east-1
    volumes:
      - ${HOME}/.aws:/root/.aws
      - ${PWD}/aws-labs:/aws-labs
    ports:
      - "8000:8000"
    command: ["/bin/bash", "-l", "-c", "tail", "-f", "/dev/null"]
    #command: ["/bin/bash", "-c", "python", "/praetorian_tools/cloudmapper/cloudmapper.py", "prepare", "--config", "config.demo.json", "--account", "demo", "--outputfile", "web/demo-data.json", "--instance-ips", "10.0.0.1"]
    #command: python /praetorian_tools/cloudmapper/cloudmapper.py prepare --config config.json.demo --account demo --outputfile web/demo-data.json --instance-ips 10.0.0.1
    #command: ["/bin/bash", "/cloudmapper/run.sh", "/cloudmapper/accounts.yaml"]
    tty: true
    working_dir: /aws-labs
    #command: ["/bin/bash", "pipenv", "shell"]